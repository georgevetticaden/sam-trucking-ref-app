{"topologyName":"smm-streaming-ref-app","config":"{\"topology.workers\":3,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"topology.eventlogger.executors\":1,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx3072m\"}","sources":[{"id":58,"topologyId":6,"topologyComponentBundleId":1,"versionId":22,"name":"TruckSpeedEvent","description":"","config":{"properties":{"cluster":"17","consumerGroupId":"sam-analytics-speed-event","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"connected-dp4.field.hortonworks.com:6667,connected-dp5.field.hortonworks.com:6667,connected-dp6.field.hortonworks.com:6667,connected-dp7.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"connected-data-platform","fetchMinimumBytes":"1","sslKeystoreType":"JKS","schemaBranch":"MASTER","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"syndicate-speed-event-avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":73,"versionId":22,"streamId":"kafka_stream_23","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1528348207241}]},{"id":57,"topologyId":6,"topologyComponentBundleId":1,"versionId":22,"name":"TruckGeoEvent","description":"","config":{"properties":{"cluster":"17","consumerGroupId":"sam-analytics-geo-event","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"connected-dp4.field.hortonworks.com:6667,connected-dp5.field.hortonworks.com:6667,connected-dp6.field.hortonworks.com:6667,connected-dp7.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"connected-data-platform","fetchMinimumBytes":"1","sslKeystoreType":"JKS","schemaBranch":"MASTER","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"syndicate-geo-event-avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":72,"versionId":22,"streamId":"kafka_stream_22","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true}],"timestamp":1528348207241}]}],"sinks":[{"id":64,"topologyId":6,"topologyComponentBundleId":16,"versionId":22,"name":"Dashboard-Speeding-Drivers","description":"","config":{"properties":{"cluster":"17","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"connected-dp1.field.hortonworks.com:2181,connected-dp0.field.hortonworks.com:2181,connected-dp2.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alerts-speeding-drivers-cube-3","clusters":"connected-data-platform","dimensions":["driverId","driverName","route","speed_AVG_Round"]}},"reconfigure":false,"timestamp":1528348207241}],"processors":[{"id":59,"topologyId":6,"topologyComponentBundleId":7,"versionId":22,"name":"JOIN","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_23","key":"driverId","with":"kafka_stream_22"}],"parallelism":1,"from":{"stream":"kafka_stream_22","key":"driverId"},"outputKeys":["kafka_stream_22:eventTime as eventTime","kafka_stream_22:eventTimeLong as eventTimeLong","kafka_stream_22:eventSource as eventSource","kafka_stream_22:truckId as truckId","kafka_stream_22:driverId as driverId","kafka_stream_22:driverName as driverName","kafka_stream_22:routeId as routeId","kafka_stream_22:route as route","eventType as eventType","latitude as latitude","longitude as longitude","correlationId as correlationId","geoAddress as geoAddress","speed as speed"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_24"}},"reconfigure":false,"outputStreams":[{"id":74,"versionId":22,"streamId":"join_processor_stream_24","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1528348207241}],"timestamp":1528348207241},{"id":60,"topologyId":6,"topologyComponentBundleId":4,"versionId":22,"name":"EvenTypeFilter","description":"","config":{"properties":{"rules":[17]}},"reconfigure":false,"outputStreams":[{"id":75,"versionId":22,"streamId":"rule_transform_stream_10","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1528348207241},{"id":76,"versionId":22,"streamId":"rule_notifier_stream_10","description":null,"topologyId":6,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1528348207241}],"timestamp":1528348207241},{"id":61,"topologyId":6,"topologyComponentBundleId":5,"versionId":22,"name":"isDriverAvgSpeed","description":"","config":{"properties":{"rules":[12],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":77,"versionId":22,"streamId":"window_transform_stream_49","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"SPEED_AVG","type":"DOUBLE","optional":false}],"timestamp":1528348207241},{"id":78,"versionId":22,"streamId":"window_notifier_stream_49","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"SPEED_AVG","type":"DOUBLE","optional":false}],"timestamp":1528348207241}],"timestamp":1528348207241},{"id":62,"topologyId":6,"topologyComponentBundleId":4,"versionId":22,"name":"isDriverSpeeding","description":"","config":{"properties":{"rules":[18]}},"reconfigure":false,"outputStreams":[{"id":79,"versionId":22,"streamId":"rule_transform_stream_11","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"SPEED_AVG","type":"DOUBLE","optional":false}],"timestamp":1528348207241},{"id":80,"versionId":22,"streamId":"rule_notifier_stream_11","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"SPEED_AVG","type":"DOUBLE","optional":false}],"timestamp":1528348207241}],"timestamp":1528348207241},{"id":63,"topologyId":6,"topologyComponentBundleId":9,"versionId":22,"name":"Round","description":"","config":{"properties":{"rules":[19]}},"reconfigure":false,"outputStreams":[{"id":81,"versionId":22,"streamId":"projection_transform_stream_39","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"DOUBLE","optional":false}],"timestamp":1528348207241},{"id":82,"versionId":22,"streamId":"projection_notifier_stream_39","description":null,"topologyId":6,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"DOUBLE","optional":false}],"timestamp":1528348207241}],"timestamp":1528348207241}],"edges":[{"id":56,"versionId":22,"topologyId":6,"fromId":58,"toId":59,"streamGroupings":[{"streamId":73,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1528348207241},{"id":55,"versionId":22,"topologyId":6,"fromId":57,"toId":59,"streamGroupings":[{"streamId":72,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1528348207241},{"id":57,"versionId":22,"topologyId":6,"fromId":59,"toId":60,"streamGroupings":[{"streamId":74,"grouping":"SHUFFLE","fields":null}],"timestamp":1528348207241},{"id":58,"versionId":22,"topologyId":6,"fromId":60,"toId":61,"streamGroupings":[{"streamId":75,"grouping":"FIELDS","fields":["driverId","driverName","route"]}],"timestamp":1528348207241},{"id":59,"versionId":22,"topologyId":6,"fromId":61,"toId":62,"streamGroupings":[{"streamId":77,"grouping":"SHUFFLE","fields":null}],"timestamp":1528348207241},{"id":60,"versionId":22,"topologyId":6,"fromId":62,"toId":63,"streamGroupings":[{"streamId":79,"grouping":"SHUFFLE","fields":null}],"timestamp":1528348207241},{"id":61,"versionId":22,"topologyId":6,"fromId":63,"toId":64,"streamGroupings":[{"streamId":81,"grouping":"SHUFFLE","fields":null}],"timestamp":1528348207241}],"rules":[{"reconfigure":false,"id":17,"versionId":22,"topologyId":6,"name":"ViolationEvent","description":"Violation Event","streams":["join_processor_stream_24"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_24 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_10"],"transforms":[]}],"outputStreams":["rule_transform_stream_10","rule_notifier_stream_10"],"timestamp":1528348207241},{"reconfigure":false,"id":18,"versionId":22,"topologyId":6,"name":"Speeding Driver","description":"speeding driver","streams":["window_transform_stream_49"],"condition":"SPEED_AVG > 80","sql":"SELECT *  FROM window_transform_stream_49 WHERE SPEED_AVG > 80","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_11"],"transforms":[]}],"outputStreams":["rule_transform_stream_11","rule_notifier_stream_11"],"timestamp":1528348207241},{"reconfigure":false,"id":19,"versionId":22,"topologyId":6,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_11"],"projections":[{"expr":"ROUND_AUTOCREATED(SPEED_AVG) AS speed_AVG_Round"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"sql":"SELECT ROUND_AUTOCREATED(SPEED_AVG) AS speed_AVG_Round,driverId,driverName,route FROM rule_transform_stream_11","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_39"],"transforms":[]}],"outputStreams":["projection_transform_stream_47","projection_notifier_stream_47"],"timestamp":1528348207241}],"windows":[{"reconfigure":false,"id":12,"versionId":22,"topologyId":6,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_10"],"window":{"windowLength":{"class":".Window$Duration","durationMs":180000},"slidingInterval":{"class":".Window$Duration","durationMs":180000},"tsField":null,"tsFields":[],"lagMs":0,"lateStream":null},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_49"],"transforms":[]}],"projections":[{"expr":"AVG(speed) AS SPEED_AVG"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"groupbykeys":["driverId","driverName","route"],"outputStreams":["window_transform_stream_49","window_notifier_stream_49"],"timestamp":1528348207241}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","4":"RULE","5":"WINDOW","16":"DRUID","7":"JOIN","9":"PROJECTION"},"topologyEditorMetadata":{"topologyId":6,"versionId":22,"data":"{\"sources\":[{\"x\":188.029296875,\"y\":196.26953125,\"id\":57},{\"x\":233.029296875,\"y\":325.01953125,\"id\":58}],\"sinks\":[{\"x\":1614.25,\"y\":181.24998474121094,\"id\":64}],\"processors\":[{\"x\":429.25,\"y\":237.5,\"id\":59},{\"x\":674.25,\"y\":228.74998474121094,\"id\":60},{\"x\":1153.029296875,\"y\":233.76953125,\"id\":62},{\"x\":1393,\"y\":233.74998474121094,\"id\":63},{\"x\":928,\"y\":231.24998474121094,\"id\":61}],\"graphTransforms\":{\"dragCoords\":[-89,123],\"zoomScale\":0.8},\"customNames\":null}","timestamp":1528348206648}}
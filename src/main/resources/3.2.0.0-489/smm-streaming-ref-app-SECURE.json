{"topologyName":"smm-streaming-ref-app","config":"{\"topology.workers\":1,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"topology.eventlogger.executors\":1,\"clustersSecurityConfig\":[{\"clusterId\":1,\"keytabPath\":\"/etc/security/keytabs/truck_streaming_analytics_service.keytab\",\"principal\":\"truck_streaming_analytics_service@STREAMANALYTICS\"}],\"topology.worker.childopts\":\"-Xmx3072m\"}","sources":[{"id":37,"topologyId":9,"topologyComponentBundleId":1,"versionId":51,"name":"TruckSpeedStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"sam-speed-stream-consumer-5","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"keytab":"/etc/security/keytabs/truck_streaming_analytics_service.keytab","emitNullTuples":false,"principal":"truck_streaming_analytics_service@STREAMANALYTICS","partitionRefreshPeriodMs":2000,"securityProtocol":"SASL_PLAINTEXT","bootstrapServers":"c-dps-connected-dp11.field.hortonworks.com:6667,c-dps-connected-dp12.field.hortonworks.com:6667,c-dps-connected-dp13.field.hortonworks.com:6667,c-dps-connected-dp14.field.hortonworks.com:6667,c-dps-connected-dp15.field.hortonworks.com:6667","kafkaServiceName":"kafka","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"orlandostreamcluster","fetchMinimumBytes":"1","sslKeystoreType":"JKS","schemaBranch":"MASTER","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"syndicate-speed-event-avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":32,"versionId":51,"streamId":"kafka_stream_14","description":null,"topologyId":9,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1533144653140}]},{"id":36,"topologyId":9,"topologyComponentBundleId":1,"versionId":51,"name":"TruckGeoSream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"sam-geo-stream-consumer-5","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"keytab":"/etc/security/keytabs/truck_streaming_analytics_service.keytab","emitNullTuples":false,"principal":"truck_streaming_analytics_service@STREAMANALYTICS","partitionRefreshPeriodMs":2000,"securityProtocol":"SASL_PLAINTEXT","bootstrapServers":"c-dps-connected-dp11.field.hortonworks.com:6667,c-dps-connected-dp12.field.hortonworks.com:6667,c-dps-connected-dp13.field.hortonworks.com:6667,c-dps-connected-dp14.field.hortonworks.com:6667,c-dps-connected-dp15.field.hortonworks.com:6667","kafkaServiceName":"kafka","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"orlandostreamcluster","fetchMinimumBytes":"1","sslKeystoreType":"JKS","schemaBranch":"MASTER","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"syndicate-geo-event-avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":31,"versionId":51,"streamId":"kafka_stream_13","description":null,"topologyId":9,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true}],"timestamp":1533144653140}]}],"sinks":[{"id":44,"topologyId":9,"topologyComponentBundleId":11,"versionId":51,"name":"Operational-Store-HBase","description":"","config":{"properties":{"writeToWAL":true,"cluster":"1","columnFamily":"events","parallelism":1,"rowKeyField":"eventTime","batchSize":100,"clusters":"orlandostreamcluster","table":"default:violation_events"}},"reconfigure":false,"timestamp":1533144653140},{"id":42,"topologyId":9,"topologyComponentBundleId":10,"versionId":51,"name":"DataLake-HDFS","description":"","config":{"properties":{"fsUrl":"hdfs://c-dps-connected-dp0.field.hortonworks.com:8020","outputFields":["eventTime","eventTimeLong","eventSource","truckId","driverId","driverName","routeId","route","eventType","latitude","longitude","correlationId","geoAddress","speed"],"cluster":"1","path":"/apps/trucking-app","extension":".txt","rotationPolicy":{"timeBasedRotation":{"rotationInterval":3,"rotationIntervalUnit":"MINUTES"}},"prefix":"violation","parallelism":1,"countPolicyValue":3,"clusters":"orlandostreamcluster"}},"reconfigure":false,"timestamp":1533144653140},{"id":43,"topologyId":9,"topologyComponentBundleId":16,"versionId":51,"name":"Dashboard-Speeding-Drivers","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"c-dps-connected-dp1.field.hortonworks.com:2181,c-dps-connected-dp2.field.hortonworks.com:2181,c-dps-connected-dp0.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"speeding-drivers-cube","clusters":"orlandostreamcluster","dimensions":["driverId","driverName","route","speed_AVG"]}},"reconfigure":false,"timestamp":1533144653140}],"processors":[{"id":38,"topologyId":9,"topologyComponentBundleId":7,"versionId":51,"name":"JOIN","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_14","key":"driverId","with":"kafka_stream_13"}],"parallelism":1,"from":{"stream":"kafka_stream_13","key":"driverId"},"outputKeys":["kafka_stream_13:eventTime as eventTime","kafka_stream_13:eventTimeLong as eventTimeLong","kafka_stream_13:eventSource as eventSource","kafka_stream_13:truckId as truckId","kafka_stream_13:driverId as driverId","kafka_stream_13:driverName as driverName","kafka_stream_13:routeId as routeId","kafka_stream_13:route as route","eventType as eventType","latitude as latitude","longitude as longitude","correlationId as correlationId","geoAddress as geoAddress","speed as speed"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_15"}},"reconfigure":false,"outputStreams":[{"id":33,"versionId":51,"streamId":"join_processor_stream_15","description":null,"topologyId":9,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1533144653140}],"timestamp":1533144653140},{"id":39,"topologyId":9,"topologyComponentBundleId":4,"versionId":51,"name":"EventType","description":"","config":{"properties":{"rules":[7]}},"reconfigure":false,"outputStreams":[{"id":34,"versionId":51,"streamId":"rule_transform_stream_2","description":null,"topologyId":9,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1533144653140},{"id":35,"versionId":51,"streamId":"rule_notifier_stream_2","description":null,"topologyId":9,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1533144653140}],"timestamp":1533144653140},{"id":40,"topologyId":9,"topologyComponentBundleId":5,"versionId":51,"name":"DriverAvgSpeed","description":"","config":{"properties":{"rules":[3],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":36,"versionId":51,"streamId":"window_transform_stream_19","description":null,"topologyId":9,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"INTEGER","optional":false}],"timestamp":1533144653140},{"id":37,"versionId":51,"streamId":"window_notifier_stream_19","description":null,"topologyId":9,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"INTEGER","optional":false}],"timestamp":1533144653140}],"timestamp":1533144653140},{"id":41,"topologyId":9,"topologyComponentBundleId":4,"versionId":51,"name":"Speeding","description":"","config":{"properties":{"rules":[8]}},"reconfigure":false,"outputStreams":[{"id":38,"versionId":51,"streamId":"rule_transform_stream_3","description":null,"topologyId":9,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"INTEGER","optional":false}],"timestamp":1533144653140},{"id":39,"versionId":51,"streamId":"rule_notifier_stream_3","description":null,"topologyId":9,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"INTEGER","optional":false}],"timestamp":1533144653140}],"timestamp":1533144653140}],"edges":[{"id":27,"versionId":51,"topologyId":9,"fromId":37,"toId":38,"streamGroupings":[{"streamId":32,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1533144653140},{"id":26,"versionId":51,"topologyId":9,"fromId":36,"toId":38,"streamGroupings":[{"streamId":31,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1533144653140},{"id":28,"versionId":51,"topologyId":9,"fromId":38,"toId":39,"streamGroupings":[{"streamId":33,"grouping":"SHUFFLE","fields":null}],"timestamp":1533144653140},{"id":29,"versionId":51,"topologyId":9,"fromId":39,"toId":40,"streamGroupings":[{"streamId":34,"grouping":"FIELDS","fields":["driverId","driverName","route"]}],"timestamp":1533144653140},{"id":30,"versionId":51,"topologyId":9,"fromId":39,"toId":42,"streamGroupings":[{"streamId":34,"grouping":"SHUFFLE","fields":null}],"timestamp":1533144653140},{"id":33,"versionId":51,"topologyId":9,"fromId":39,"toId":44,"streamGroupings":[{"streamId":34,"grouping":"SHUFFLE","fields":null}],"timestamp":1533144653140},{"id":31,"versionId":51,"topologyId":9,"fromId":40,"toId":41,"streamGroupings":[{"streamId":36,"grouping":"SHUFFLE","fields":null}],"timestamp":1533144653140},{"id":32,"versionId":51,"topologyId":9,"fromId":41,"toId":43,"streamGroupings":[{"streamId":38,"grouping":"SHUFFLE","fields":null}],"timestamp":1533144653140}],"rules":[{"reconfigure":false,"id":7,"versionId":51,"topologyId":9,"name":"Violation Event","description":"violation event","streams":["join_processor_stream_15"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_15 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_2"],"transforms":[]}],"outputStreams":["rule_transform_stream_2","rule_notifier_stream_2"],"timestamp":1533144653140},{"reconfigure":false,"id":8,"versionId":51,"topologyId":9,"name":"Speeding Driver","description":"speeding","streams":["window_transform_stream_19"],"condition":"speed_AVG > 80","sql":"SELECT *  FROM window_transform_stream_19 WHERE speed_AVG > 80","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_3"],"transforms":[]}],"outputStreams":["rule_transform_stream_3","rule_notifier_stream_3"],"timestamp":1533144653140}],"windows":[{"reconfigure":false,"id":3,"versionId":51,"topologyId":9,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_2"],"window":{"windowLength":{"class":".Window$Duration","durationMs":180000},"slidingInterval":{"class":".Window$Duration","durationMs":180000},"tsField":null,"tsFields":[],"lagMs":0,"lateStream":null},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_19"],"transforms":[]}],"projections":[{"expr":"SUM(speed) AS speed_AVG"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"groupbykeys":["driverId","driverName","route"],"outputStreams":["window_transform_stream_19","window_notifier_stream_19"],"timestamp":1533144653140}],"branchRules":[],"bundleIdToType":{"11":"HBASE","1":"KAFKA","4":"RULE","5":"WINDOW","16":"DRUID","7":"JOIN","10":"HDFS"},"topologyEditorMetadata":{"topologyId":9,"versionId":51,"data":"{\"sources\":[{\"x\":163.75,\"y\":133.25,\"id\":36},{\"x\":163.52178955078125,\"y\":243.475830078125,\"id\":37}],\"sinks\":[{\"x\":1378.134765625,\"y\":64.22953033447266,\"id\":43},{\"x\":908.0833129882812,\"y\":179.548828125,\"id\":42},{\"x\":900.5625,\"y\":319.9375305175781,\"id\":44}],\"processors\":[{\"x\":423,\"y\":181.25,\"id\":38},{\"x\":668,\"y\":180,\"id\":39},{\"x\":896.8020629882812,\"y\":64.22953033447266,\"id\":40},{\"x\":1139.975341796875,\"y\":64.22953033447266,\"id\":41}],\"graphTransforms\":{\"dragCoords\":[-66.85145104920593,83.80294094619984],\"zoomScale\":0.7977850010816556},\"customNames\":null}","timestamp":1533144652577}}
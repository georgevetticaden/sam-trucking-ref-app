{"topologyName":"streaming-ref-app-advanced","config":"{\"topology.workers\":3,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx3072m\"}","sources":[{"id":26,"topologyId":4,"topologyComponentBundleId":1,"versionId":22,"name":"GeoStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"geo-stream-20","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-build4.field.hortonworks.com:6667,hdf-3-1-build5.field.hortonworks.com:6667,hdf-3-1-build6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"streamanalytics","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":31,"versionId":22,"streamId":"kafka_stream_1","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true}],"timestamp":1512590909580}],"timestamp":1512588425331},{"id":25,"topologyId":4,"topologyComponentBundleId":1,"versionId":22,"name":"SpeedStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"speed-stream-20","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-build4.field.hortonworks.com:6667,hdf-3-1-build5.field.hortonworks.com:6667,hdf-3-1-build6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"streamanalytics","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_speed_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":30,"versionId":22,"streamId":"kafka_stream_2","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1512590909580}],"timestamp":1512588425317}],"sinks":[{"id":42,"topologyId":4,"topologyComponentBundleId":17,"versionId":22,"name":"Dashboard-Violation-Predictions","description":"","config":{"properties":{"cluster":"2","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"hdp-2-6-3-ga2.field.hortonworks.com:2181,hdp-2-6-3-ga0.field.hortonworks.com:2181,hdp-2-6-3-ga1.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alerts-violation-predictions-cube","clusters":"datalake","dimensions":["ViolationPredicted","eventTime","eventSource","truckId","driverId","driverName","route","eventType","latitude","longitude","correlationId","routeId","geoAddress","speed","splitJoinValue","week"]}},"reconfigure":false,"timestamp":1512590909580},{"id":32,"topologyId":4,"topologyComponentBundleId":17,"versionId":22,"name":"Dashboard-Speeding-Alerts","description":"","config":{"properties":{"cluster":"2","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"hdp-2-6-3-ga2.field.hortonworks.com:2181,hdp-2-6-3-ga0.field.hortonworks.com:2181,hdp-2-6-3-ga1.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alerts-speeding-drivers-cube","clusters":"datalake","dimensions":["driverId","driverName","route","speed_AVG_Round"]}},"reconfigure":false,"timestamp":1512590909580}],"processors":[{"id":27,"topologyId":4,"topologyComponentBundleId":7,"versionId":22,"name":"JOIN","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_2","key":"driverId","with":"kafka_stream_1"}],"parallelism":1,"from":{"stream":"kafka_stream_1","key":"driverId"},"outputKeys":["kafka_stream_1:eventTime as eventTime","kafka_stream_1:eventSource as eventSource","kafka_stream_1:truckId as truckId","kafka_stream_1:driverId as driverId","kafka_stream_1:driverName as driverName","kafka_stream_1:routeId as routeId","kafka_stream_1:route as route","eventType","latitude","longitude","correlationId","geoAddress","speed"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsField":null,"lagMs":0},"outputStream":"join_processor_stream_3"}},"reconfigure":false,"outputStreams":[{"id":32,"versionId":22,"streamId":"join_processor_stream_3","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":28,"topologyId":4,"topologyComponentBundleId":4,"versionId":22,"name":"Filter","description":"","config":{"properties":{"rules":[10]}},"reconfigure":false,"outputStreams":[{"id":33,"versionId":22,"streamId":"rule_transform_stream_1","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1512590909580},{"id":34,"versionId":22,"streamId":"rule_notifier_stream_1","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":33,"topologyId":4,"topologyComponentBundleId":10,"versionId":22,"name":"Split","description":"","config":{"properties":{"rules":[13]}},"reconfigure":false,"outputStreams":[{"id":41,"versionId":22,"streamId":"projection_transform_stream_33","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1512590909580},{"id":42,"versionId":22,"streamId":"projection_notifier_stream_33","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":36,"topologyId":4,"topologyComponentBundleId":25,"versionId":22,"name":"ENRICH-WEATHER","description":"","config":{"properties":{"outputStreamToSchema":{"custom_processor_stream_36":{"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}]}},"outputSchema":{"fields":[{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}]},"inputSchema":{"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false}]},"parallelism":1,"config.weatherServiceURL":"http://weather.com/api?lat=${latitude}&lng=${longitude}","name":"ENRICH-WEATHER","description":"Enrichment with normalized weather data required for the model","jarFileName":"sam-custom-processor-0.0.10.jar","inputSchemaMap":{"projection_transform_stream_33":{"latitude":"latitude","longitude":"longitude","driverId":"driverId"}},"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.weather.WeatherEnrichmentProcessor"}},"reconfigure":false,"outputStreams":[{"id":45,"versionId":22,"streamId":"custom_processor_stream_36","description":null,"topologyId":4,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":35,"topologyId":4,"topologyComponentBundleId":24,"versionId":22,"name":"ENRICH-Timesheet","description":"","config":{"properties":{"config.kerberosClientPrincipal":"","outputStreamToSchema":{"custom_processor_stream_35":{"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}]}},"config.enrichmentSQL":"select hours_logged, miles_logged from timesheet where driverid= ${driverId} and week=${week}","outputSchema":null,"inputSchema":null,"parallelism":1,"description":"Enriches the input schema with data from Phoenix based on user supplied SQL","config.zkServerUrl":"hdp-2-6-3-ga0.field.hortonworks.com:2181","customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.phoenix.PhoenixEnrichmentSecureProcessor","config.enrichedOutputFields":"driverFatigueByHours, driverFatigueByMiles","config.secureCluster":false,"name":"ENRICH-PHOENIX","config.kerberosKeyTabFile":"","jarFileName":"sam-custom-processor-0.0.10-jar-with-dependencies.jar"}},"reconfigure":false,"outputStreams":[{"id":44,"versionId":22,"streamId":"custom_processor_stream_35","description":null,"topologyId":4,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":34,"topologyId":4,"topologyComponentBundleId":24,"versionId":22,"name":"ENRICH-HR","description":"","config":{"properties":{"config.kerberosClientPrincipal":"","outputStreamToSchema":{"custom_processor_stream_34":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false}]}},"config.enrichmentSQL":"select certified, wage_plan from drivers where driverid=${driverId}","outputSchema":null,"inputSchema":null,"parallelism":1,"description":"Enriches the input schema with data from Phoenix based on user supplied SQL","config.zkServerUrl":"hdp-2-6-3-ga0.field.hortonworks.com:2181","customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.phoenix.PhoenixEnrichmentSecureProcessor","config.enrichedOutputFields":"driverCertification, driverWagePlan","config.secureCluster":false,"name":"ENRICH-PHOENIX","config.kerberosKeyTabFile":"","jarFileName":"sam-custom-processor-0.0.10-jar-with-dependencies.jar"}},"reconfigure":false,"outputStreams":[{"id":43,"versionId":22,"streamId":"custom_processor_stream_34","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":39,"topologyId":4,"topologyComponentBundleId":7,"versionId":22,"name":"JOIN-1","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"custom_processor_stream_35","key":"splitJoinValue","with":"custom_processor_stream_34"},{"type":"INNER","stream":"custom_processor_stream_36","key":"splitJoinValue","with":"custom_processor_stream_35"}],"parallelism":1,"from":{"stream":"custom_processor_stream_34","key":"splitJoinValue"},"outputKeys":["eventTime","eventSource","truckId","driverId","driverName","routeId","route","eventType","latitude","longitude","correlationId","geoAddress","speed","custom_processor_stream_34:splitJoinValue as splitJoinValue","week","driverCertification","driverWagePlan","driverFatigueByHours","driverFatigueByMiles","Model_Feature_FoggyWeather","Model_Feature_RainyWeather","Model_Feature_WindyWeather"],"window":{"windowLength":{"class":".Window$Duration","durationMs":4000},"slidingInterval":{"class":".Window$Duration","durationMs":4000},"tsField":null,"lagMs":0},"outputStream":"join_processor_stream_39"}},"reconfigure":false,"outputStreams":[{"id":47,"versionId":22,"streamId":"join_processor_stream_39","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":38,"topologyId":4,"topologyComponentBundleId":26,"versionId":22,"name":"NORMALIZE-MODEL-FEATURES","description":"","config":{"properties":{"outputStreamToSchema":{"custom_processor_stream_38":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}]}},"outputSchema":{"fields":[{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}]},"inputSchema":null,"parallelism":1,"name":"NORMALIZE-MODEL-FEATURES","description":"Normalize the features of the model before passing it to model","jarFileName":"sam-custom-processor-0.0.10a.jar","customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.driver.predictivemodel.FeatureNormalizationProcessor"}},"reconfigure":false,"outputStreams":[{"id":48,"versionId":22,"streamId":"custom_processor_stream_38","description":null,"topologyId":4,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":40,"topologyId":4,"topologyComponentBundleId":9,"versionId":22,"name":"Prediction","description":"","config":{"properties":{"modelName":"DriverViolationPredictionModel","parallelism":1}},"reconfigure":false,"outputStreams":[{"id":49,"versionId":22,"streamId":"pmml_stream_40","description":null,"topologyId":4,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":41,"topologyId":4,"topologyComponentBundleId":4,"versionId":22,"name":"Filter-Predict","description":"","config":{"properties":{"rules":[14]}},"reconfigure":false,"outputStreams":[{"id":50,"versionId":22,"streamId":"rule_transform_stream_14","description":null,"topologyId":4,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1512590909580},{"id":51,"versionId":22,"streamId":"rule_notifier_stream_14","description":null,"topologyId":4,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":29,"topologyId":4,"topologyComponentBundleId":5,"versionId":22,"name":"DriverAvgSpeed","description":"","config":{"properties":{"rules":[3],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":35,"versionId":22,"streamId":"window_transform_stream_5","description":null,"topologyId":4,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1512590909580},{"id":36,"versionId":22,"streamId":"window_notifier_stream_5","description":null,"topologyId":4,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":30,"topologyId":4,"topologyComponentBundleId":4,"versionId":22,"name":"Speeding","description":"","config":{"properties":{"rules":[11]}},"reconfigure":false,"outputStreams":[{"id":37,"versionId":22,"streamId":"rule_transform_stream_3","description":null,"topologyId":4,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1512590909580},{"id":38,"versionId":22,"streamId":"rule_notifier_stream_3","description":null,"topologyId":4,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580},{"id":31,"topologyId":4,"topologyComponentBundleId":10,"versionId":22,"name":"PROJECTION","description":"","config":{"properties":{"rules":[12]}},"reconfigure":false,"outputStreams":[{"id":39,"versionId":22,"streamId":"projection_transform_stream_7","description":null,"topologyId":4,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"LONG","optional":false}],"timestamp":1512590909580},{"id":40,"versionId":22,"streamId":"projection_notifier_stream_7","description":null,"topologyId":4,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"LONG","optional":false}],"timestamp":1512590909580}],"timestamp":1512590909580}],"edges":[{"id":19,"versionId":22,"topologyId":4,"fromId":26,"toId":27,"streamGroupings":[{"streamId":31,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1512590909580},{"id":18,"versionId":22,"topologyId":4,"fromId":25,"toId":27,"streamGroupings":[{"streamId":30,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1512590909580},{"id":20,"versionId":22,"topologyId":4,"fromId":27,"toId":28,"streamGroupings":[{"streamId":32,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":21,"versionId":22,"topologyId":4,"fromId":28,"toId":29,"streamGroupings":[{"streamId":33,"grouping":"FIELDS","fields":["driverId","driverName","route"]}],"timestamp":1512590909580},{"id":25,"versionId":22,"topologyId":4,"fromId":28,"toId":33,"streamGroupings":[{"streamId":33,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":26,"versionId":22,"topologyId":4,"fromId":33,"toId":34,"streamGroupings":[{"streamId":41,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":27,"versionId":22,"topologyId":4,"fromId":33,"toId":35,"streamGroupings":[{"streamId":41,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":28,"versionId":22,"topologyId":4,"fromId":33,"toId":36,"streamGroupings":[{"streamId":41,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":34,"versionId":22,"topologyId":4,"fromId":36,"toId":39,"streamGroupings":[{"streamId":45,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1512590909580},{"id":33,"versionId":22,"topologyId":4,"fromId":35,"toId":39,"streamGroupings":[{"streamId":44,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1512590909580},{"id":32,"versionId":22,"topologyId":4,"fromId":34,"toId":39,"streamGroupings":[{"streamId":43,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1512590909580},{"id":35,"versionId":22,"topologyId":4,"fromId":39,"toId":38,"streamGroupings":[{"streamId":47,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":36,"versionId":22,"topologyId":4,"fromId":38,"toId":40,"streamGroupings":[{"streamId":48,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":37,"versionId":22,"topologyId":4,"fromId":40,"toId":41,"streamGroupings":[{"streamId":49,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":38,"versionId":22,"topologyId":4,"fromId":41,"toId":42,"streamGroupings":[{"streamId":50,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":22,"versionId":22,"topologyId":4,"fromId":29,"toId":30,"streamGroupings":[{"streamId":35,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":23,"versionId":22,"topologyId":4,"fromId":30,"toId":31,"streamGroupings":[{"streamId":37,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580},{"id":24,"versionId":22,"topologyId":4,"fromId":31,"toId":32,"streamGroupings":[{"streamId":39,"grouping":"SHUFFLE","fields":null}],"timestamp":1512590909580}],"rules":[{"reconfigure":false,"id":10,"versionId":22,"topologyId":4,"name":"Violation Event","description":"violation event","streams":["join_processor_stream_3"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_3 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_1"],"transforms":[]}],"outputStreams":["rule_transform_stream_1","rule_notifier_stream_1"],"timestamp":1512590909580},{"reconfigure":false,"id":13,"versionId":22,"topologyId":4,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_1"],"projections":[{"functionName":"TIMESTAMP_LONG","args":["eventTime"],"outputFieldName":"splitJoinValue"},{"functionName":"GET_WEEK","args":["eventTime"],"outputFieldName":"week"},{"expr":"eventTime"},{"expr":"eventSource"},{"expr":"truckId"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"routeId"},{"expr":"route"},{"expr":"eventType"},{"expr":"latitude"},{"expr":"longitude"},{"expr":"correlationId"},{"expr":"geoAddress"},{"expr":"speed"}],"sql":"SELECT TIMESTAMP_LONG(eventTime) AS \"splitJoinValue\",GET_WEEK(eventTime) AS \"week\",eventTime,eventSource,truckId,driverId,driverName,routeId,route,eventType,latitude,longitude,correlationId,geoAddress,speed FROM rule_transform_stream_1","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_33"],"transforms":[]}],"outputStreams":["projection_transform_stream_33","projection_notifier_stream_33"],"timestamp":1512590909580},{"reconfigure":false,"id":14,"versionId":22,"topologyId":4,"name":"violation predict","description":"prediction","streams":["pmml_stream_40"],"condition":"ViolationPredicted = 'yes'","sql":"SELECT *  FROM pmml_stream_40 WHERE ViolationPredicted = 'yes'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_14"],"transforms":[]}],"outputStreams":["rule_transform_stream_14","rule_notifier_stream_14"],"timestamp":1512590909580},{"reconfigure":false,"id":11,"versionId":22,"topologyId":4,"name":"Speeding Driver","description":"speeding","streams":["window_transform_stream_5"],"condition":"speed_AVG > 80","sql":"SELECT *  FROM window_transform_stream_5 WHERE speed_AVG > 80","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_3"],"transforms":[]}],"outputStreams":["rule_transform_stream_3","rule_notifier_stream_3"],"timestamp":1512590909580},{"reconfigure":false,"id":12,"versionId":22,"topologyId":4,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_3"],"projections":[{"functionName":"ROUND","args":["speed_AVG"],"outputFieldName":"speed_AVG_Round"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"sql":"SELECT ROUND(speed_AVG) AS \"speed_AVG_Round\",driverId,driverName,route FROM rule_transform_stream_3","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_7"],"transforms":[]}],"outputStreams":["projection_transform_stream_7","projection_notifier_stream_7"],"timestamp":1512590909580}],"windows":[{"reconfigure":false,"id":3,"versionId":22,"topologyId":4,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_1"],"window":{"windowLength":{"class":".Window$Duration","durationMs":180000},"slidingInterval":{"class":".Window$Duration","durationMs":180000},"tsField":null,"lagMs":0},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_5"],"transforms":[]}],"projections":[{"functionName":"AVG_FN","args":["speed"],"outputFieldName":"speed_AVG"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"groupbykeys":["driverId","driverName","route"],"outputStreams":["window_transform_stream_5","window_notifier_stream_5"],"timestamp":1512590909580}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","24":"CUSTOM","25":"CUSTOM","4":"RULE","26":"CUSTOM","5":"WINDOW","17":"DRUID","7":"JOIN","9":"PMML","10":"PROJECTION"},"topologyEditorMetadata":{"topologyId":4,"versionId":22,"data":"{\"sources\":[{\"x\":71.25,\"y\":159.25,\"id\":26},{\"x\":72.5,\"y\":436.25,\"id\":25}],\"sinks\":[{\"x\":1600,\"y\":134.24998474121094,\"id\":32},{\"x\":1557.5,\"y\":704.2499389648438,\"id\":42}],\"processors\":[{\"x\":317.5,\"y\":205.5,\"id\":27},{\"x\":562.5,\"y\":204.25,\"id\":28},{\"x\":766.25,\"y\":138,\"id\":29},{\"x\":1020,\"y\":136.74998474121094,\"id\":30},{\"x\":1263.75,\"y\":136.74998474121094,\"id\":31},{\"x\":768.75,\"y\":339.2499694824219,\"id\":33},{\"x\":1003.75,\"y\":289.2499694824219,\"id\":34},{\"x\":1053.75,\"y\":424.2499694824219,\"id\":35},{\"x\":1001.25,\"y\":582.9999389648438,\"id\":36},{\"x\":1520,\"y\":421.7499694824219,\"id\":38},{\"x\":1266.25,\"y\":422.9999694824219,\"id\":39},{\"x\":1525,\"y\":516.75,\"id\":40},{\"x\":1527.5,\"y\":607.9999389648438,\"id\":41}],\"graphTransforms\":{\"dragCoords\":[-4,69],\"zoomScale\":0.8},\"customNames\":[{\"uiname\":\"ENRICH-HR\",\"customProcessorName\":\"ENRICH-PHOENIX\"},{\"uiname\":\"ENRICH-Timesheet\",\"customProcessorName\":\"ENRICH-PHOENIX\"},{\"uiname\":\"ENRICH-WEATHER\",\"customProcessorName\":\"ENRICH-WEATHER\"},{\"uiname\":\"NORMALIZE-MODEL-FEATURES\",\"customProcessorName\":\"NORMALIZE-MODEL-FEATURES\"}]}","timestamp":1512590909580}}
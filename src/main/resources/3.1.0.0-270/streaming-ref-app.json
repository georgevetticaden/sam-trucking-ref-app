{"topologyName":"streaming-ref-app2","config":"{\"topology.workers\":3,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx3072m\"}","sources":[{"id":85,"topologyId":12,"topologyComponentBundleId":1,"versionId":33,"name":"GeoStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"new-geo-stream-simple-100","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-build4.field.hortonworks.com:6667,hdf-3-1-build5.field.hortonworks.com:6667,hdf-3-1-build6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"streamanalytics","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":190,"versionId":33,"streamId":"kafka_stream_66","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true}],"timestamp":1513291175397}],"timestamp":1513291175108},{"id":84,"topologyId":12,"topologyComponentBundleId":1,"versionId":33,"name":"SpeedStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"new-speed-stream-simple-100","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-build4.field.hortonworks.com:6667,hdf-3-1-build5.field.hortonworks.com:6667,hdf-3-1-build6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"UNCOMMITTED_EARLIEST","sslTruststoreType":"JKS","clusters":"streamanalytics","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_speed_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":189,"versionId":33,"streamId":"kafka_stream_67","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513291175397}],"timestamp":1513291175078}],"sinks":[{"id":100,"topologyId":12,"topologyComponentBundleId":17,"versionId":33,"name":"Speding-Alerts-Dashboard","description":"","config":{"properties":{"cluster":"2","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"hdp-2-6-3-ga2.field.hortonworks.com:2181,hdp-2-6-3-ga0.field.hortonworks.com:2181,hdp-2-6-3-ga1.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alerts-speeding-drivers-cube","clusters":"datalake","dimensions":["driverId","driverName","route","speed_AVG_Round"]}},"reconfigure":false,"timestamp":1513291175397}],"processors":[{"id":86,"topologyId":12,"topologyComponentBundleId":7,"versionId":33,"name":"JOIN","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_67","key":"driverId","with":"kafka_stream_66"}],"parallelism":1,"from":{"stream":"kafka_stream_66","key":"driverId"},"outputKeys":["kafka_stream_66:eventTime as eventTime","kafka_stream_66:eventSource as eventSource","kafka_stream_66:truckId as truckId","kafka_stream_66:driverId as driverId","kafka_stream_66:driverName as driverName","kafka_stream_66:routeId as routeId","kafka_stream_66:route as route","eventType","latitude","longitude","correlationId","geoAddress","speed"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsField":null,"lagMs":0},"outputStream":"join_processor_stream_68"}},"reconfigure":false,"outputStreams":[{"id":191,"versionId":33,"streamId":"join_processor_stream_68","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513291175397}],"timestamp":1513291175397},{"id":87,"topologyId":12,"topologyComponentBundleId":4,"versionId":33,"name":"Filter","description":"","config":{"properties":{"rules":[43,44]}},"reconfigure":false,"outputStreams":[{"id":192,"versionId":33,"streamId":"rule_transform_stream_37","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513291175397},{"id":193,"versionId":33,"streamId":"rule_notifier_stream_37","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513291175397},{"id":194,"versionId":33,"streamId":"rule_transform_stream_38","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513291175397},{"id":195,"versionId":33,"streamId":"rule_notifier_stream_38","description":null,"topologyId":12,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513291175397}],"timestamp":1513291175397},{"id":96,"topologyId":12,"topologyComponentBundleId":5,"versionId":33,"name":"DriverAvgSpeed","description":"","config":{"properties":{"rules":[8],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":206,"versionId":33,"streamId":"window_transform_stream_70","description":null,"topologyId":12,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1513291175397},{"id":207,"versionId":33,"streamId":"window_notifier_stream_70","description":null,"topologyId":12,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1513291175397}],"timestamp":1513291175397},{"id":97,"topologyId":12,"topologyComponentBundleId":4,"versionId":33,"name":"Filter-Speed","description":"","config":{"properties":{"rules":[47]}},"reconfigure":false,"outputStreams":[{"id":208,"versionId":33,"streamId":"rule_transform_stream_39","description":null,"topologyId":12,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1513291175397},{"id":209,"versionId":33,"streamId":"rule_notifier_stream_39","description":null,"topologyId":12,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1513291175397}],"timestamp":1513291175397},{"id":98,"topologyId":12,"topologyComponentBundleId":10,"versionId":33,"name":"Round","description":"","config":{"properties":{"rules":[48]}},"reconfigure":false,"outputStreams":[{"id":210,"versionId":33,"streamId":"projection_transform_stream_72","description":null,"topologyId":12,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"LONG","optional":false}],"timestamp":1513291175397},{"id":211,"versionId":33,"streamId":"projection_notifier_stream_72","description":null,"topologyId":12,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"LONG","optional":false}],"timestamp":1513291175397}],"timestamp":1513291175397}],"edges":[{"id":85,"versionId":33,"topologyId":12,"fromId":85,"toId":86,"streamGroupings":[{"streamId":190,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1513291175397},{"id":84,"versionId":33,"topologyId":12,"fromId":84,"toId":86,"streamGroupings":[{"streamId":189,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1513291175397},{"id":86,"versionId":33,"topologyId":12,"fromId":86,"toId":87,"streamGroupings":[{"streamId":191,"grouping":"SHUFFLE","fields":null}],"timestamp":1513291175397},{"id":87,"versionId":33,"topologyId":12,"fromId":87,"toId":96,"streamGroupings":[{"streamId":192,"grouping":"FIELDS","fields":["driverId","driverName","route"]}],"timestamp":1513291175397},{"id":99,"versionId":33,"topologyId":12,"fromId":96,"toId":97,"streamGroupings":[{"streamId":206,"grouping":"SHUFFLE","fields":null}],"timestamp":1513291175397},{"id":100,"versionId":33,"topologyId":12,"fromId":97,"toId":98,"streamGroupings":[{"streamId":208,"grouping":"SHUFFLE","fields":null}],"timestamp":1513291175397},{"id":101,"versionId":33,"topologyId":12,"fromId":98,"toId":100,"streamGroupings":[{"streamId":210,"grouping":"SHUFFLE","fields":null}],"timestamp":1513291175397}],"rules":[{"reconfigure":false,"id":43,"versionId":33,"topologyId":12,"name":"Violation Event","description":"violation","streams":["join_processor_stream_68"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_68 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_37"],"transforms":[]}],"outputStreams":["rule_transform_stream_37","rule_notifier_stream_37"],"timestamp":1513291175397},{"reconfigure":false,"id":44,"versionId":33,"topologyId":12,"name":"Non Violation Event","description":"non violation","streams":["join_processor_stream_68"],"condition":"eventType = 'Normal'","sql":"SELECT *  FROM join_processor_stream_68 WHERE eventType = 'Normal'","actions":[],"outputStreams":["rule_transform_stream_38","rule_notifier_stream_38"],"timestamp":1513291175397},{"reconfigure":false,"id":47,"versionId":33,"topologyId":12,"name":"Speeding","description":"speeding","streams":["window_transform_stream_70"],"condition":"speed_AVG > 80","sql":"SELECT *  FROM window_transform_stream_70 WHERE speed_AVG > 80","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_39"],"transforms":[]}],"outputStreams":["rule_transform_stream_39","rule_notifier_stream_39"],"timestamp":1513291175397},{"reconfigure":false,"id":48,"versionId":33,"topologyId":12,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_39"],"projections":[{"functionName":"ROUND_AUTOCREATED","args":["speed_AVG"],"outputFieldName":"speed_AVG_Round"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"sql":"SELECT ROUND_AUTOCREATED(speed_AVG) AS \"speed_AVG_Round\",driverId,driverName,route FROM rule_transform_stream_39","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_72"],"transforms":[]}],"outputStreams":["projection_transform_stream_72","projection_notifier_stream_72"],"timestamp":1513291175397}],"windows":[{"reconfigure":false,"id":8,"versionId":33,"topologyId":12,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_37"],"window":{"windowLength":{"class":".Window$Duration","durationMs":180000},"slidingInterval":{"class":".Window$Duration","durationMs":180000},"tsField":null,"lagMs":0},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_70"],"transforms":[]}],"projections":[{"functionName":"AVG_FN","args":["speed"],"outputFieldName":"speed_AVG"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"groupbykeys":["driverId","driverName","route"],"outputStreams":["window_transform_stream_70","window_notifier_stream_70"],"timestamp":1513291175397}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","4":"RULE","5":"WINDOW","17":"DRUID","7":"JOIN","10":"PROJECTION"},"topologyEditorMetadata":{"topologyId":12,"versionId":33,"data":"{\"sources\":[{\"x\":116.25,\"y\":175.75,\"id\":85},{\"x\":141.25,\"y\":265.5,\"id\":84}],\"sinks\":[{\"x\":1602.5,\"y\":155.5,\"id\":100}],\"processors\":[{\"x\":363.75,\"y\":221.75,\"id\":86},{\"x\":597.5,\"y\":223,\"id\":87},{\"x\":841.25,\"y\":156.75,\"id\":96},{\"x\":1088.75,\"y\":156.75,\"id\":97},{\"x\":1341.25,\"y\":155.5,\"id\":98}],\"graphTransforms\":{\"dragCoords\":[-72,138],\"zoomScale\":0.8},\"customNames\":[]}","timestamp":1513291175051}}
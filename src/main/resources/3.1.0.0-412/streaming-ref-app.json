{"topologyName":"streaming-ref-app","config":"{\"topology.workers\":3,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"topology.eventlogger.executors\":1,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx3072m\"}","sources":[{"id":70,"topologyId":10,"topologyComponentBundleId":1,"versionId":12,"name":"SpeedStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"speed-stream-simple-ref-1","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-build4.field.hortonworks.com:6667,hdf-3-1-build5.field.hortonworks.com:6667,hdf-3-1-build6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"streamanalytics","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_speed_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":100,"versionId":12,"streamId":"kafka_stream_70","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513862486125}],"timestamp":1513862461090},{"id":69,"topologyId":10,"topologyComponentBundleId":1,"versionId":12,"name":"GeoStream","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"geo-stream-simple-ref-2","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-build4.field.hortonworks.com:6667,hdf-3-1-build5.field.hortonworks.com:6667,hdf-3-1-build6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"streamanalytics","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":99,"versionId":12,"streamId":"kafka_stream_69","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true}],"timestamp":1513862486125}],"timestamp":1513862461081}],"sinks":[{"id":75,"topologyId":10,"topologyComponentBundleId":16,"versionId":12,"name":"Speding-Alerts-Dashboard","description":"","config":{"properties":{"cluster":"2","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"hdp-2-6-3-ga2.field.hortonworks.com:2181,hdp-2-6-3-ga0.field.hortonworks.com:2181,hdp-2-6-3-ga1.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alerts-speeding-drivers-cube","clusters":"datalake","dimensions":["projection_transform_stream_74:driverId","projection_transform_stream_74:driverName","projection_transform_stream_74:route","projection_transform_stream_74:speed_AVG_Round"]}},"reconfigure":false,"timestamp":1513862486125}],"processors":[{"id":71,"topologyId":10,"topologyComponentBundleId":7,"versionId":12,"name":"JOIN","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_70","key":"driverId","with":"kafka_stream_69"}],"parallelism":1,"from":{"stream":"kafka_stream_69","key":"driverId"},"outputKeys":["kafka_stream_69:eventTime as eventTime","kafka_stream_69:eventSource as eventSource","kafka_stream_69:truckId as truckId","kafka_stream_69:driverId as driverId","kafka_stream_69:driverName as driverName","kafka_stream_69:routeId as routeId","kafka_stream_69:route as route","eventType as eventType","latitude as latitude","longitude as longitude","correlationId as correlationId","geoAddress as geoAddress","speed as speed"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_71"}},"reconfigure":false,"outputStreams":[{"id":101,"versionId":12,"streamId":"join_processor_stream_71","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513862486125}],"timestamp":1513862486125},{"id":72,"topologyId":10,"topologyComponentBundleId":4,"versionId":12,"name":"Filter","description":"","config":{"properties":{"rules":[29,30],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":102,"versionId":12,"streamId":"rule_transform_stream_29","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513862486125},{"id":103,"versionId":12,"streamId":"rule_notifier_stream_29","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513862486125},{"id":104,"versionId":12,"streamId":"rule_transform_stream_30","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513862486125},{"id":105,"versionId":12,"streamId":"rule_notifier_stream_30","description":null,"topologyId":10,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1513862486125}],"timestamp":1513862486125},{"id":73,"topologyId":10,"topologyComponentBundleId":5,"versionId":12,"name":"DriverAvgSpeed","description":"","config":{"properties":{"rules":[7],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":106,"versionId":12,"streamId":"window_transform_stream_73","description":null,"topologyId":10,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1513862486125},{"id":107,"versionId":12,"streamId":"window_notifier_stream_73","description":null,"topologyId":10,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG","type":"DOUBLE","optional":false}],"timestamp":1513862486125}],"timestamp":1513862486125},{"id":74,"topologyId":10,"topologyComponentBundleId":9,"versionId":12,"name":"Round","description":"","config":{"properties":{"rules":[31]}},"reconfigure":false,"outputStreams":[{"id":108,"versionId":12,"streamId":"projection_transform_stream_74","description":null,"topologyId":10,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"LONG","optional":false}],"timestamp":1513862486125},{"id":109,"versionId":12,"streamId":"projection_notifier_stream_74","description":null,"topologyId":10,"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed_AVG_Round","type":"LONG","optional":false}],"timestamp":1513862486125}],"timestamp":1513862486125}],"edges":[{"id":66,"versionId":12,"topologyId":10,"fromId":70,"toId":71,"streamGroupings":[{"streamId":100,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1513862486125},{"id":65,"versionId":12,"topologyId":10,"fromId":69,"toId":71,"streamGroupings":[{"streamId":99,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1513862486125},{"id":67,"versionId":12,"topologyId":10,"fromId":71,"toId":72,"streamGroupings":[{"streamId":101,"grouping":"SHUFFLE","fields":null}],"timestamp":1513862486125},{"id":68,"versionId":12,"topologyId":10,"fromId":72,"toId":73,"streamGroupings":[{"streamId":102,"grouping":"SHUFFLE","fields":null}],"timestamp":1513862486125},{"id":69,"versionId":12,"topologyId":10,"fromId":73,"toId":74,"streamGroupings":[{"streamId":106,"grouping":"SHUFFLE","fields":null}],"timestamp":1513862486125},{"id":70,"versionId":12,"topologyId":10,"fromId":74,"toId":75,"streamGroupings":[{"streamId":108,"grouping":"SHUFFLE","fields":null}],"timestamp":1513862486125}],"rules":[{"reconfigure":false,"id":29,"versionId":12,"topologyId":10,"name":"Violation Event","description":"violation","streams":["join_processor_stream_71"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_71 WHERE eventType <> 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_29"],"transforms":[]}],"outputStreams":["rule_transform_stream_29","rule_notifier_stream_29"],"timestamp":1513862486125},{"reconfigure":false,"id":30,"versionId":12,"topologyId":10,"name":"Non Violation Event","description":"non violation","streams":["join_processor_stream_71"],"condition":"eventType = 'Normal'","sql":"SELECT *  FROM join_processor_stream_71 WHERE eventType = 'Normal'","actions":[],"outputStreams":["rule_transform_stream_30","rule_notifier_stream_30"],"timestamp":1513862486125},{"reconfigure":false,"id":31,"versionId":12,"topologyId":10,"name":"projection_auto_generated","description":"projection description auto generated","streams":["window_transform_stream_73"],"projections":[{"functionName":"ROUND_AUTOCREATED","args":["speed_AVG"],"outputFieldName":"speed_AVG_Round"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"sql":"SELECT ROUND_AUTOCREATED(speed_AVG) AS \"speed_AVG_Round\",driverId,driverName,route FROM window_transform_stream_73","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_74"],"transforms":[]}],"outputStreams":["projection_transform_stream_74","projection_notifier_stream_74"],"timestamp":1513862486125}],"windows":[{"reconfigure":false,"id":7,"versionId":12,"topologyId":10,"name":"window_auto_generated","description":"window description auto generated","streams":["rule_transform_stream_29"],"window":{"windowLength":{"class":".Window$Duration","durationMs":180000},"slidingInterval":{"class":".Window$Duration","durationMs":180000},"tsField":null,"tsFields":[],"lagMs":0,"lateStream":null},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_73"],"transforms":[]}],"projections":[{"functionName":"AVG_FN","args":["speed"],"outputFieldName":"speed_AVG"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"route"}],"groupbykeys":["driverId","driverName","route"],"outputStreams":["window_transform_stream_73","window_notifier_stream_73"],"timestamp":1513862486125}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","4":"RULE","5":"WINDOW","16":"DRUID","7":"JOIN","9":"PROJECTION"},"topologyEditorMetadata":{"topologyId":10,"versionId":12,"data":"{\"sources\":[{\"x\":93.75,\"y\":177,\"id\":69},{\"x\":98,\"y\":265.5,\"id\":70}],\"processors\":[{\"x\":314.25,\"y\":221.75,\"id\":71},{\"x\":538,\"y\":221.75,\"id\":72},{\"x\":763,\"y\":165.5,\"id\":73},{\"x\":1006.75,\"y\":163,\"id\":74}],\"sinks\":[{\"x\":1239.25,\"y\":159.25,\"id\":75}],\"graphTransforms\":{\"dragCoords\":[-14,26],\"zoomScale\":0.8}}","timestamp":1513862486125}}
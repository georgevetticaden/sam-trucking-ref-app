{"topologyName":"truck-streaming-analytics-app","config":"{\"topology.workers\":6,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"topology.eventlogger.executors\":1,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx3072m\"}","sources":[{"id":331,"topologyId":18,"topologyComponentBundleId":1,"versionId":37,"name":"TruckSpeedEvent","description":"","config":{"properties":{"cluster":"7","consumerGroupId":"ref-speed-12017","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-release4.field.hortonworks.com:6667,hdf-3-1-release5.field.hortonworks.com:6667,hdf-3-1-release6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"streamanalytics_AUTOCREATED","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_speed_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":397,"versionId":37,"streamId":"kafka_stream_105","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false}],"timestamp":1518561566840}],"timestamp":1518554762369},{"id":330,"topologyId":18,"topologyComponentBundleId":1,"versionId":37,"name":"TruckGeoEvent","description":"","config":{"properties":{"cluster":"7","consumerGroupId":"ref-geo-12017","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"hdf-3-1-release4.field.hortonworks.com:6667,hdf-3-1-release5.field.hortonworks.com:6667,hdf-3-1-release6.field.hortonworks.com:6667","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"streamanalytics_AUTOCREATED","fetchMinimumBytes":"1","sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"truck_events_avro","readerSchemaVersion":"1","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"reconfigure":false,"outputStreams":[{"id":396,"versionId":37,"streamId":"kafka_stream_104","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":true}],"timestamp":1518561566840}],"timestamp":1518554762365}],"sinks":[{"id":347,"topologyId":18,"topologyComponentBundleId":16,"versionId":37,"name":"Dashboard-Predictions","description":"","config":{"properties":{"cluster":"8","clusterReplication":1,"segmentGranularity":"HOUR","indexRetryPeriod":"PT10M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","parallelism":1,"clusterPartitions":1,"windowPeriod":"PT10M","aggregatorList":[{"count":{"name":"cnt"}}],"tranquilityZKconnect":"hdp-latest-ga2.field.hortonworks.com:2181,hdp-latest-ga0.field.hortonworks.com:2181,hdp-latest-ga1.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","topic":"","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"alerts-violation-predictions-cube-hoosac-3","clusters":"datalake_AUTOCREATED","dimensions":["ViolationPredicted","eventTime","eventSource","truckId","driverId","driverName","routeId","route","eventType","latitude","longitude","correlationId","geoAddress","speed","eventTimeLong"]}},"reconfigure":false,"timestamp":1518561566840}],"processors":[{"id":332,"topologyId":18,"topologyComponentBundleId":7,"versionId":37,"name":"JOIN","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"kafka_stream_105","key":"driverId","with":"kafka_stream_104"}],"parallelism":1,"from":{"stream":"kafka_stream_104","key":"driverId"},"outputKeys":["kafka_stream_104:eventTime as eventTime","kafka_stream_104:eventSource as eventSource","kafka_stream_104:truckId as truckId","kafka_stream_104:driverId as driverId","kafka_stream_104:driverName as driverName","kafka_stream_104:routeId as routeId","kafka_stream_104:route as route","eventType as eventType","latitude as latitude","longitude as longitude","correlationId as correlationId","geoAddress as geoAddress","speed as speed","kafka_stream_104:eventTimeLong as eventTimeLong"],"window":{"windowLength":{"class":".Window$Duration","durationMs":3000},"slidingInterval":{"class":".Window$Duration","durationMs":3000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_106"}},"reconfigure":false,"outputStreams":[{"id":398,"versionId":37,"streamId":"join_processor_stream_106","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":333,"topologyId":18,"topologyComponentBundleId":4,"versionId":37,"name":"EventType","description":"","config":{"properties":{"outputStreams":[{"id":"rule_notifier_stream_67","schema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}]}},{"id":"rule_notifier_stream_46","schema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}]}},{"id":"rule_transform_stream_46","schema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}]}},{"id":"rule_transform_stream_67","schema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}]}}],"rules":[104,105]}},"reconfigure":false,"outputStreams":[{"id":399,"versionId":37,"streamId":"rule_transform_stream_46","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840},{"id":400,"versionId":37,"streamId":"rule_notifier_stream_46","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840},{"id":401,"versionId":37,"streamId":"rule_transform_stream_67","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840},{"id":402,"versionId":37,"streamId":"rule_notifier_stream_67","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":334,"topologyId":18,"topologyComponentBundleId":9,"versionId":37,"name":"Split","description":"","config":{"properties":{"outputStreams":[{"id":"projection_notifier_stream_170","schema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}]}},{"id":"projection_transform_stream_170","schema":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}]}}],"rules":[106]}},"reconfigure":false,"outputStreams":[{"id":403,"versionId":37,"streamId":"projection_transform_stream_170","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1518561566840},{"id":404,"versionId":37,"streamId":"projection_notifier_stream_170","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":335,"topologyId":18,"topologyComponentBundleId":26,"versionId":37,"name":"ENRICH-WEATHER","description":"","config":{"properties":{"outputStreamToSchema":{"custom_processor_stream_190":{"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}]}},"outputSchema":{"fields":[{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}]},"inputSchema":{"fields":[{"name":"driverId","type":"INTEGER","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false}]},"parallelism":1,"config.weatherServiceURL":"http://weather.com/api?lat=${latitude}&lng=${longitude}","name":"ENRICH-WEATHER_AUTOCREATED","digest":"785257f18294ff7d397ddb85eb08cc60d549ede84d9da69a61bc59b3431be4e2","description":"Enrichment with normalized weather data required for the model","inputSchemaMap":{"projection_transform_stream_170":{"driverId":"driverId","latitude":"latitude","longitude":"longitude"}},"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.weather.WeatherEnrichmentProcessor"}},"reconfigure":false,"outputStreams":[{"id":405,"versionId":37,"streamId":"custom_processor_stream_190","description":null,"topologyId":18,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":336,"topologyId":18,"topologyComponentBundleId":28,"versionId":37,"name":"ENRICH-Timesheet","description":"","config":{"properties":{"config.kerberosClientPrincipal":"","outputStreamToSchema":{"custom_processor_stream_189":{"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}]}},"config.enrichmentSQL":"select hours_logged, miles_logged from timesheet where driverid= ${driverId} and week=${week}","outputSchema":null,"inputSchema":null,"parallelism":1,"description":"Enriches the input schema with data from Phoenix based on user supplied SQL","config.zkServerUrl":"hdp-latest-ga0.field.hortonworks.com:2181","customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.phoenix.PhoenixEnrichmentSecureProcessor","config.enrichedOutputFields":"driverFatigueByHours, driverFatigueByMiles","config.secureCluster":false,"name":"ENRICH-PHOENIX_AUTOCREATED","digest":"44f160e5f64f4007a7acde7237a3fb79f91e7a7bff33511291a67653b54fc34d","config.kerberosKeyTabFile":""}},"reconfigure":false,"outputStreams":[{"id":406,"versionId":37,"streamId":"custom_processor_stream_189","description":null,"topologyId":18,"fields":[{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":337,"topologyId":18,"topologyComponentBundleId":28,"versionId":37,"name":"ENRICH-HR","description":"","config":{"properties":{"config.kerberosClientPrincipal":"","outputStreamToSchema":{"custom_processor_stream_171":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false}]}},"config.enrichmentSQL":"select certified, wage_plan from drivers where driverid=${driverId}","outputSchema":null,"inputSchema":null,"parallelism":1,"description":"Enriches the input schema with data from Phoenix based on user supplied SQL","config.zkServerUrl":"hdp-latest-ga0.field.hortonworks.com:2181","customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.phoenix.PhoenixEnrichmentSecureProcessor","config.enrichedOutputFields":"driverCertification, driverWagePlan","config.secureCluster":false,"name":"ENRICH-PHOENIX_AUTOCREATED","digest":"44f160e5f64f4007a7acde7237a3fb79f91e7a7bff33511291a67653b54fc34d","config.kerberosKeyTabFile":""}},"reconfigure":false,"outputStreams":[{"id":407,"versionId":37,"streamId":"custom_processor_stream_171","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":338,"topologyId":18,"topologyComponentBundleId":7,"versionId":37,"name":"JOIN-ENRICHMENTS","description":"","config":{"properties":{"joins":[{"type":"INNER","stream":"custom_processor_stream_189","key":"splitJoinValue","with":"custom_processor_stream_171"},{"type":"INNER","stream":"custom_processor_stream_190","key":"splitJoinValue","with":"custom_processor_stream_189"}],"parallelism":1,"from":{"stream":"custom_processor_stream_171","key":"splitJoinValue"},"outputKeys":["eventTime as eventTime","eventSource as eventSource","truckId as truckId","driverId as driverId","driverName as driverName","routeId as routeId","route as route","eventType as eventType","latitude as latitude","longitude as longitude","correlationId as correlationId","geoAddress as geoAddress","speed as speed","custom_processor_stream_171:splitJoinValue as splitJoinValue","week as week","driverCertification as driverCertification","driverWagePlan as driverWagePlan","driverFatigueByHours as driverFatigueByHours","driverFatigueByMiles as driverFatigueByMiles","Model_Feature_FoggyWeather as Model_Feature_FoggyWeather","Model_Feature_RainyWeather as Model_Feature_RainyWeather","Model_Feature_WindyWeather as Model_Feature_WindyWeather","eventTimeLong as eventTimeLong"],"window":{"windowLength":{"class":".Window$Duration","durationMs":4000},"slidingInterval":{"class":".Window$Duration","durationMs":4000},"tsFields":null,"lagMs":0},"outputStream":"join_processor_stream_191"}},"reconfigure":false,"outputStreams":[{"id":408,"versionId":37,"streamId":"join_processor_stream_191","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":339,"topologyId":18,"topologyComponentBundleId":27,"versionId":37,"name":"NORMALIZE-MODEL-FEATURES","description":"","config":{"properties":{"outputStreamToSchema":{"custom_processor_stream_71":{"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}]}},"outputSchema":{"fields":[{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}]},"inputSchema":null,"parallelism":1,"name":"NORMALIZE-MODEL-FEATURES_DELAY_AUTOCREATED","digest":"785257f18294ff7d397ddb85eb08cc60d549ede84d9da69a61bc59b3431be4e2","description":"Normalize the features of the model before passing it to model with option to cause latency","config.delayTimeOutSecs":0,"customProcessorImpl":"hortonworks.hdf.sam.custom.processor.enrich.driver.predictivemodel.FeatureNormalizationWithDelayProcessor"}},"reconfigure":false,"outputStreams":[{"id":409,"versionId":37,"streamId":"custom_processor_stream_71","description":null,"topologyId":18,"fields":[{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"splitJoinValue","type":"LONG","optional":false},{"name":"week","type":"INTEGER","optional":false},{"name":"driverCertification","type":"STRING","optional":false},{"name":"driverWagePlan","type":"STRING","optional":false},{"name":"driverFatigueByHours","type":"STRING","optional":false},{"name":"driverFatigueByMiles","type":"STRING","optional":false},{"name":"Model_Feature_FoggyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_RainyWeather","type":"DOUBLE","optional":false},{"name":"Model_Feature_WindyWeather","type":"DOUBLE","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false},{"name":"Model_Feature_Certification","type":"INTEGER","optional":false},{"name":"Model_Feature_WagePlan","type":"INTEGER","optional":false},{"name":"Model_Feature_FatigueByHours","type":"DOUBLE","optional":false},{"name":"Model_Feature_FatigueByMiles","type":"DOUBLE","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":340,"topologyId":18,"topologyComponentBundleId":8,"versionId":37,"name":"Predict","description":"","config":{"properties":{"modelName":"DriverViolationPredictionModel_AUTOCREATED","parallelism":1}},"reconfigure":false,"outputStreams":[{"id":410,"versionId":37,"streamId":"pmml_stream_193","description":null,"topologyId":18,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840},{"id":341,"topologyId":18,"topologyComponentBundleId":4,"versionId":37,"name":"Prediction","description":"","config":{"properties":{"rules":[107],"outputStreams":[{"id":"rule_transform_stream_75","schema":{"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}]}},{"id":"rule_notifier_stream_75","schema":{"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}]}}],"parallelism":1}},"reconfigure":false,"outputStreams":[{"id":411,"versionId":37,"streamId":"rule_transform_stream_75","description":null,"topologyId":18,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840},{"id":412,"versionId":37,"streamId":"rule_notifier_stream_75","description":null,"topologyId":18,"fields":[{"name":"ViolationPredicted","type":"STRING","optional":false},{"name":"eventTime","type":"STRING","optional":false},{"name":"eventSource","type":"STRING","optional":false},{"name":"truckId","type":"INTEGER","optional":false},{"name":"driverId","type":"INTEGER","optional":false},{"name":"driverName","type":"STRING","optional":false},{"name":"routeId","type":"INTEGER","optional":false},{"name":"route","type":"STRING","optional":false},{"name":"eventType","type":"STRING","optional":false},{"name":"latitude","type":"DOUBLE","optional":false},{"name":"longitude","type":"DOUBLE","optional":false},{"name":"correlationId","type":"LONG","optional":false},{"name":"geoAddress","type":"STRING","optional":false},{"name":"speed","type":"INTEGER","optional":false},{"name":"eventTimeLong","type":"LONG","optional":false}],"timestamp":1518561566840}],"timestamp":1518561566840}],"edges":[{"id":348,"versionId":37,"topologyId":18,"fromId":331,"toId":332,"streamGroupings":[{"streamId":397,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1518561566840},{"id":347,"versionId":37,"topologyId":18,"fromId":330,"toId":332,"streamGroupings":[{"streamId":396,"grouping":"FIELDS","fields":["driverId"]}],"timestamp":1518561566840},{"id":349,"versionId":37,"topologyId":18,"fromId":332,"toId":333,"streamGroupings":[{"streamId":398,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":351,"versionId":37,"topologyId":18,"fromId":333,"toId":334,"streamGroupings":[{"streamId":401,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":354,"versionId":37,"topologyId":18,"fromId":334,"toId":337,"streamGroupings":[{"streamId":403,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":355,"versionId":37,"topologyId":18,"fromId":334,"toId":336,"streamGroupings":[{"streamId":403,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":356,"versionId":37,"topologyId":18,"fromId":334,"toId":335,"streamGroupings":[{"streamId":403,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":357,"versionId":37,"topologyId":18,"fromId":335,"toId":338,"streamGroupings":[{"streamId":405,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1518561566840},{"id":358,"versionId":37,"topologyId":18,"fromId":336,"toId":338,"streamGroupings":[{"streamId":406,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1518561566840},{"id":359,"versionId":37,"topologyId":18,"fromId":337,"toId":338,"streamGroupings":[{"streamId":407,"grouping":"FIELDS","fields":["splitJoinValue"]}],"timestamp":1518561566840},{"id":360,"versionId":37,"topologyId":18,"fromId":338,"toId":339,"streamGroupings":[{"streamId":408,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":361,"versionId":37,"topologyId":18,"fromId":339,"toId":340,"streamGroupings":[{"streamId":409,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":362,"versionId":37,"topologyId":18,"fromId":340,"toId":341,"streamGroupings":[{"streamId":410,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840},{"id":363,"versionId":37,"topologyId":18,"fromId":341,"toId":347,"streamGroupings":[{"streamId":411,"grouping":"SHUFFLE","fields":null}],"timestamp":1518561566840}],"rules":[{"reconfigure":false,"id":104,"versionId":37,"topologyId":18,"name":"Violation Event","description":"Violations","streams":["join_processor_stream_106"],"condition":"eventType <> 'Normal'","sql":"SELECT *  FROM join_processor_stream_106 WHERE eventType <> 'Normal'","actions":[],"outputStreams":["rule_transform_stream_46","rule_notifier_stream_46"],"timestamp":1518561566840},{"reconfigure":false,"id":105,"versionId":37,"topologyId":18,"name":"Non Violation Events","description":"Events that are not violations","streams":["join_processor_stream_106"],"condition":"eventType = 'Normal'","sql":"SELECT *  FROM join_processor_stream_106 WHERE eventType = 'Normal'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_67"],"transforms":[]}],"outputStreams":["rule_transform_stream_67","rule_notifier_stream_67"],"timestamp":1518561566840},{"reconfigure":false,"id":106,"versionId":37,"topologyId":18,"name":"projection_auto_generated","description":"projection description auto generated","streams":["rule_transform_stream_67"],"projections":[{"functionName":"TIMESTAMP_LONG_AUTOCREATED","args":["eventTime"],"outputFieldName":"splitJoinValue"},{"functionName":"GET_WEEK_AUTOCREATED","args":["eventTime"],"outputFieldName":"week"},{"expr":"eventTime"},{"expr":"eventSource"},{"expr":"truckId"},{"expr":"driverId"},{"expr":"driverName"},{"expr":"routeId"},{"expr":"route"},{"expr":"eventType"},{"expr":"latitude"},{"expr":"longitude"},{"expr":"correlationId"},{"expr":"geoAddress"},{"expr":"speed"},{"expr":"eventTimeLong"}],"sql":"SELECT TIMESTAMP_LONG_AUTOCREATED(eventTime) AS \"splitJoinValue\",GET_WEEK_AUTOCREATED(eventTime) AS \"week\",eventTime,eventSource,truckId,driverId,driverName,routeId,route,eventType,latitude,longitude,correlationId,geoAddress,speed,eventTimeLong FROM rule_transform_stream_67","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["projection_transform_stream_170"],"transforms":[]}],"outputStreams":["projection_transform_stream_799","projection_notifier_stream_799"],"timestamp":1518561566840},{"reconfigure":false,"id":107,"versionId":37,"topologyId":18,"name":"Violation Predicted","description":"model returned a prediction","streams":["pmml_stream_193"],"condition":"ViolationPredicted = 'yes'","sql":"SELECT *  FROM pmml_stream_193 WHERE ViolationPredicted = 'yes'","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["rule_transform_stream_75"],"transforms":[]}],"outputStreams":["rule_transform_stream_75","rule_notifier_stream_75"],"timestamp":1518561566840}],"windows":[],"branchRules":[],"bundleIdToType":{"1":"KAFKA","4":"RULE","26":"CUSTOM","27":"CUSTOM","16":"DRUID","28":"CUSTOM","7":"JOIN","8":"PMML","9":"PROJECTION"},"topologyEditorMetadata":{"topologyId":18,"versionId":37,"data":"{\"sources\":[{\"x\":8.014793395996094,\"y\":121.93537902832031,\"id\":330},{\"x\":8.014793395996094,\"y\":383.98992919921875,\"id\":331}],\"sinks\":[{\"x\":1425.1641845703125,\"y\":1196.8231201171875,\"id\":347}],\"processors\":[{\"x\":275.2846984863281,\"y\":252.53915405273438,\"id\":332},{\"x\":528.1853637695312,\"y\":252.53915405273438,\"id\":333},{\"x\":804.3309936523438,\"y\":252.3848876953125,\"id\":334},{\"x\":1079.6539306640625,\"y\":10.578125,\"id\":337},{\"x\":1072.6337890625,\"y\":252.77069091796875,\"id\":336},{\"x\":1077.89892578125,\"y\":540.59375,\"id\":335},{\"x\":1411.164794921875,\"y\":252.2744140625,\"id\":338},{\"x\":1416.65673828125,\"y\":704.2496948242188,\"id\":340},{\"x\":1417.886474609375,\"y\":931.1863403320312,\"id\":341},{\"x\":1414.8919677734375,\"y\":480.1229248046875,\"id\":339}],\"graphTransforms\":{\"dragCoords\":[19.310004780708084,26.232739642556623],\"zoomScale\":0.7914567961372176},\"customNames\":[{\"uiname\":\"ENRICH-HR\",\"customProcessorName\":\"ENRICH-PHOENIX_AUTOCREATED\"},{\"uiname\":\"ENRICH-Timesheet\",\"customProcessorName\":\"ENRICH-PHOENIX_AUTOCREATED\"},{\"uiname\":\"ENRICH-WEATHER\",\"customProcessorName\":\"ENRICH-WEATHER_AUTOCREATED\"},{\"uiname\":\"NORMALIZE-MODEL-FEATURES\",\"customProcessorName\":\"NORMALIZE-MODEL-FEATURES_DELAY_AUTOCREATED\"}]}","timestamp":1518561566840}}